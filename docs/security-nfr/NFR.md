# Security NFR Requirements

ID | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет
---|----------|----------|---------------|--------------------|-----------|----------
NFR-01 | Защита от brute-force атак | Ограничение попыток входа/регистрации | $\leq$ 5 попыток/мин с IP, блокировка на 15 мин | WAF/Rate limiting middleware | auth | High
NFR-02 | Безопасность паролей | Хэширование паролей современными алгоритмами | Argon2id: t=3, m=64MB, p=2 | Unit-тесты + конфиг хэширования | auth | High
NFR-03 | Время жизни JWT токенов | Ограничение времени действия токенов | Access: 15 мин, Refresh: 7 дней | Конфиг JWT + тесты | auth | High
NFR-04 | Защита данных в БД | Шифрование чувствительных данных | PII в зашифрованном виде | Миграции БД + тесты | database | High
NFR-05 | Безопасность API эндпоинтов | Валидация и санитизация входных данных | 100% эндпоинтов с валидацией | Pydantic схемы + тесты | api | High
NFR-06 | Производительность под нагрузкой | Отклик API при пиковой нагрузке | p95 $\leq$ 500ms при 30 RPS | Нагрузочные тесты k6 | api | Medium
NFR-07 | Уязвимости зависимостей | Контроль уязвимостей в зависимостях | Critical/High $\leq$ 7 дней | CI: SCA сканирование | build | High
NFR-08 | Безопасность контейнеров | Запуск без root прав | runAsNonRoot: true | Dockerfile + securityContext | deployment | Medium
NFR-09 | Логирование безопасности | Аудит критических событий | 100% auth событий логгируются | Structured logging + ELK | monitoring | Medium
NFR-10 | HTTPS enforcement | Принудительное шифрование трафика | 100% redirect HTTP→HTTPS | Reverse proxy config | network | High
NFR- 11 | Безопасная ротация секретов | Секреты (.env, токены) обновляются регулярно | каждые $\leq$ 30 дней | Vault/CI политика + журнал | ci/cd | Low
