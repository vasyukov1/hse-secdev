# Реестр рисков

## Матрица рисков

| RiskID | Описание | Связь (Flow/NFR) | L | I | Risk | Стратегия | Владелец | Срок | Критерий закрытия |
|--------|----------|------------------|---|---|------|-----------|----------|------|-------------------|
| R1 | Брутфорс аутентификации | F1, NFR-01 | 3 | 4 | 12 | Снизить | @backend-dev | 2025.10 | Rate limiting 5 req/min на /auth (AUTH-01) |
| R2 | SQL Injection через API | F2-F5, NFR-05 | 2 | 5 | 10 | Снизить | @backend-dev | 2025.10 | 100% Pydantic валидация (API-01) |
| R3 | Утечка PII данных | F6, NFR-04 | 2 | 5 | 10 | Снизить | @backend-dev | 2025.11 | Шифрование PII в БД (DB-01) |
| R4 | DoS атака на API | F1, NFR-01, NFR-06 | 3 | 3 | 9 | Снизить | @devops | 2025.12 | Rate limiting + тесты 30 RPS (PERF-01) |
| R5 | Компрометация JWT токенов | F1, NFR-03 | 3 | 3 | 9 | Снизить | @backend-dev | 2025.10 | JWT TTL 15мин/7дней (AUTH-03) |
| R6 | Уязвимости зависимостей | API, NFR-07 | 3 | 3 | 9 | Снизить | @security | 2025.10 | SCA scanning в CI (DEV-01) |
| R7 | Небезопасные контейнеры | Container, NFR-08 | 2 | 4 | 8 | Снизить | @devops | 2025.10 | runAsNonRoot: true (DEPLOY-01) |
| R8 | HTTP трафик | F1, NFR-10 | 2 | 4 | 8 | Снизить | @devops | 2025.10 | 100% redirect HTTP→HTTPS (INFRA-01) |
| R9 | Просроченные секреты | DB, NFR-11 | 2 | 3 | 6 | Снизить | @devops | 2025.10 | Ротация секретов ≤ 30 дней |
| R10 | Недостаточное логирование | F1, NFR-09 | 2 | 3 | 6 | Снизить | @backend-dev | 2025.12 | 100% auth событий логгируются (MON-01) |
| R11 | Weak password hashing | DB, NFR-02 | 1 | 4 | 4 | Снизить | @backend-dev | 2025.10 | Argon2id хэширование (AUTH-02) |
| R12 | Невалидные данные медиа | F1, NFR-05 | 4 | 1 | 4 | Принять | @backend-dev | 2025.10 | Pydantic validation покрывает основные кейсы |

## Приоритеты обработки

### Высокий приоритет (Risk ≥ 10)
- **R1**: Брутфорс аутентификации → AUTH-01 (NFR-01)
- **R2**: SQL Injection → API-01 (NFR-05)
- **R3**: Утечка PII данных → DB-01 (NFR-04)

### Средний приоритет (Risk 6-9)
- **R4**: DoS атака → AUTH-01 + PERF-01 (NFR-01, NFR-06)
- **R5**: Компрометация JWT → AUTH-03 (NFR-03)
- **R6**: Уязвимости зависимостей → DEV-01 (NFR-07)
- **R7**: Небезопасные контейнеры → DEPLOY-01 (NFR-08)
- **R8**: HTTP трафик → INFRA-01 (NFR-10)

### Низкий приоритет (Risk ≤ 5)
- **R9**: Просроченные секреты (NFR-11)
- **R10**: Недостаточное логирование → MON-01 (NFR-09)
- **R11**: Weak password hashing → AUTH-02 (NFR-02)
- **R12**: Невалидные данные медиа (принят)

## Связь с задачами из бэклога

| RiskID | Story/Task ID | Статус | Sprint |
|--------|---------------|--------|--------|
| R1 | AUTH-01 | Запланирована | 2025.10 |
| R2 | API-01 | Запланирована | 2025.10 |
| R3 | DB-01 | Запланирована | 2025.11 |
| R4 | AUTH-01 | Запланирована | 2025.10 |
| R5 | AUTH-03 | Запланирована | 2025.10 |
| R6 | DEV-01 | Запланирована | 2025.10 |
| R7 | DEPLOY-01 | Запланирована | 2025.10 |
| R8 | INFRA-01 | Запланирована | 2025.10 |
| R9 | DEV-02 | Запланирована | 2025.10 |
| R10 | MON-01 | Запланирована | 2025.12 |
| R11 | AUTH-02 | Запланирована | 2025.10 |
