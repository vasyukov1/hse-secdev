# ADR-003: Resource Limits and Timeouts
Дата: 20-10-2025
Статус: Accepted

## Context
Отсутствие лимитов на размер запросов и время выполнения операций создаёт риски DoS атак и истощения ресурсов сервера.

## Decision
Ввести лимиты:
- Максимальный размер тела запроса: 1MB
- Таймаут операций БД: 30 секунд
- Валидация сложности JSON структур

## Consequences
**Плюсы:**
- Защита от DoS атак
- Стабильность работы приложения
- Предсказуемое потребление ресурсов

**Минусы:**
- Ограничение на размер загружаемых данных
- Возможные таймауты для сложных операций

## Security Impact
- Митигация риска R4 (DoS атака на API)
- Связь с NFR-01 (защита от brute-force) и NFR-06 (производительность)
- Улучшение отказоустойчивости

## Rollout Plan
1. Настроить лимиты размера запросов в FastAPI
2. Добавить таймауты для операций БД
3. Реализовать валидацию сложности JSON
4. Добавить мониторинг и алертинг по таймаутам

## Links
- NFR-01 (защита от brute-force)
- NFR-06 (производительность под нагрузкой)
- R4 (DoS атака на API)
- tests/test_limits.py::test_request_limits
